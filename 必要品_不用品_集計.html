<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>å¿…è¦å“ãƒ»ä¸ç”¨å“ é›†è¨ˆ</title>
<style>
  body {
    font-family: sans-serif;
    padding: 20px;
  }
  button {
    margin: 5px;
    padding: 12px 24px;
    font-size: 18px;
  }
  .need { background-color: #c8f7c5; }
  .not  { background-color: #f7c5c5; }

  #spinner {
    font-size: 40px;
    display: none;
    animation: spin 1s linear infinite;
  }

  #done {
    font-size: 40px;
    display: none;
  }

  @keyframes spin {
    0%   { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
  }
</style>
</head>
<body>

<h2>å¿…è¦å“ãƒ»ä¸ç”¨å“ é›†è¨ˆ</h2>

<p>
  <button class="need" onclick="needClick()">å¿…è¦</button>
  <button class="not" onclick="notClick()">ä¸è¦</button>
</p>

<p>
  <button onclick="showTotal()">åˆè¨ˆ</button>
  <button onclick="resetCount()">ãƒªã‚»ãƒƒãƒˆ</button>
</p>

<div id="spinner">ğŸ›‘</div>
<div id="done">âœ… å®Œäº†ï¼</div>

<h3 id="result">çµæœï¼šã¾ã ã§ã™</h3>

<script>
let needCount = 0;
let notNeedCount = 0;

function needClick() {
  needCount++;
}

function notClick() {
  notNeedCount++;
}

function speak(text) {
  const speech = new SpeechSynthesisUtterance(text);
  speech.lang = "ja-JP";
  window.speechSynthesis.cancel();
  window.speechSynthesis.speak(speech);
}

function showTotal() {
  const spinner = document.getElementById("spinner");
  const done = document.getElementById("done");
  const result = document.getElementById("result");

  done.style.display = "none";
  result.textContent = "è¨ˆç®—ä¸­â€¦";
  spinner.style.display = "block";

  setTimeout(() => {
    spinner.style.display = "none";
    done.style.display = "block";

    const text = `å¿…è¦ ${needCount} ã“ã€ä¸ç”¨å“ ${notNeedCount} ã“ã§ã™`;
    result.textContent = text;
    speak(text);
  }, 1200);
}

function resetCount() {
  needCount = 0;
  notNeedCount = 0;
  document.getElementById("spinner").style.display = "none";
  document.getElementById("done").style.display = "none";
  document.getElementById("result").textContent = "çµæœï¼šãƒªã‚»ãƒƒãƒˆã—ã¾ã—ãŸ";
  window.speechSynthesis.cancel();
}
</script>

</body>
</html>
